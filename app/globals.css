@import "tailwindcss";

@layer base {
  :root {
    /* Apple-inspired light green theme */
    --background: #f6fbf7; /* very pale green */
    --foreground: #0b1220; /* dark text */
    --card: #ffffff;
    --card-foreground: #06121a;
    --popover: #ffffff;
    --popover-foreground: #06121a;
    --primary: #54c18a; /* apple-like green */
    --primary-foreground: #ffffff;
    --secondary: #eaf8ef; /* pale green panel */
    --secondary-foreground: #0b1220;
    --muted: #eef7f0;
    --muted-foreground: #5a6a63;
    --accent: #dff6e9;
    --accent-foreground: #0b1220;
    --destructive: #ef4444;
    --destructive-foreground: #ffffff;
    --border: #e5e7eb;
    --input: #e5e7eb;
    --ring: #3b82f6;
    --radius: 0.5rem;
  }

  .dark {
    --background: #07120e;
    --foreground: #e6f6ec;
    --card: #0f1a17;
    --card-foreground: #e6f6ec;
    --popover: #0f1a17;
    --popover-foreground: #e6f6ec;
    --primary: #38a779;
    --primary-foreground: #e6f6ec;
    --secondary: #072018;
    --secondary-foreground: #cfeee0;
    --muted: #0b2a22;
    --muted-foreground: #9fcfb6;
    --accent: #093827;
    --accent-foreground: #e6f6ec;
    --destructive: #ef4444;
    --destructive-foreground: #0c0a09;
    --border: #44403c;
    --input: #44403c;
    --ring: #3b82f6;
  }
}

@layer base {
  * {
    border-color: var(--border); /* 替代 @apply border-border */
  }
  body {
    background-color: var(--background);
    color: var(--foreground);
  }
}

/* KaTeX 字体配置 */
@font-face {
  font-family: 'KaTeX_AMS';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_AMS-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_AMS-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_AMS-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Bold.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Bold.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Bold.ttf') format('truetype');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Bold.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Bold.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Bold.ttf') format('truetype');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Main';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Bold.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Bold.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Bold.ttf') format('truetype');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Main';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-BoldItalic.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-BoldItalic.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-BoldItalic.ttf') format('truetype');
  font-weight: bold;
  font-style: italic;
}

@font-face {
  font-family: 'KaTeX_Main';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Italic.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Italic.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Italic.ttf') format('truetype');
  font-weight: normal;
  font-style: italic;
}

@font-face {
  font-family: 'KaTeX_Main';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Math';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-BoldItalic.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-BoldItalic.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-BoldItalic.ttf') format('truetype');
  font-weight: bold;
  font-style: italic;
}

@font-face {
  font-family: 'KaTeX_Math';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-Italic.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-Italic.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-Italic.ttf') format('truetype');
  font-weight: normal;
  font-style: italic;
}

@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Bold.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Bold.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Bold.ttf') format('truetype');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Italic.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Italic.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Italic.ttf') format('truetype');
  font-weight: normal;
  font-style: italic;
}

@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Script';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Script-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Script-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Script-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Size1';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size1-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size1-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size1-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Size2';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size2-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size2-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size2-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Size3';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size3-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size3-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size3-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Size4';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size4-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size4-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size4-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Typewriter';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Typewriter-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Typewriter-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Typewriter-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@layer utilities {
  .no-print {
    @apply block;
  }

  @media print {
    .no-print {
      @apply hidden;
    }
    
    body {
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
      background: white !important;
      color: black !important;
    }
    
    /* 确保所有内容都能正确打印 */
    * {
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
  }
}

/* 学术风格样式 */
.prose-academic {
  font-family: Georgia, serif;
  line-height: 1.8;
}

.prose-academic h1,
.prose-academic h2,
.prose-academic h3,
.prose-academic h4,
.prose-academic h5,
.prose-academic h6 {
  font-family: Georgia, serif;
  color: #000;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
}

.prose-academic p {
  text-align: justify;
  margin-bottom: 1em;
}

.prose-academic code {
  font-family: Consolas, monospace;
  background-color: #f5f5f5;
  padding: 0.2em 0.4em;
  border-radius: 0.25em;
  font-size: 0.9em;
}

.prose-academic pre {
  background-color: #f5f5f5;
  border-radius: 0.5em;
  padding: 1em;
  overflow-x: auto;
}

.prose-academic blockquote {
  border-left: 4px solid #ccc;
  padding-left: 1em;
  margin-left: 0;
  font-style: italic;
}

/* 现代风格样式 */
.prose-modern {
  font-family: system-ui, sans-serif;
  font-size: 16px;
}

.prose-modern h1,
.prose-modern h2,
.prose-modern h3,
.prose-modern h4,
.prose-modern h5,
.prose-modern h6 {
  font-family: system-ui, sans-serif;
  color: #111827;
  font-weight: 700;
}

.prose-modern a {
  color: #3b82f6;
  text-decoration: none;
}

.prose-modern a:hover {
  text-decoration: underline;
}

/* 最小风格样式 */
.prose-minimal {
  font-family: system-ui, sans-serif;
  color: #333;
}

.prose-minimal h1,
.prose-minimal h2,
.prose-minimal h3,
.prose-minimal h4,
.prose-minimal h5,
.prose-minimal h6 {
  font-weight: 600;
  color: #222;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
}

/* 默认风格样式 */
.prose-default {
  font-family: system-ui, sans-serif;
}

.prose-default h1,
.prose-default h2,
.prose-default h3,
.prose-default h4,
.prose-default h5,
.prose-default h6 {
  color: #111827;
  font-weight: 600;
}

/* PDF导出专用样式 */
.pdf-export-plain {
  background: white !important;
  color: #222 !important;
}

.pdf-export-plain * {
  color: #222 !important;
  background: transparent !important;
  border-color: #ddd !important;
  box-shadow: none !important;
}

.pdf-export-mathml .katex .katex-mathml {
  display: none;
}

.pdf-export-mathml .katex-display .katex-mathml {
  display: none;
}

.pdf-export-mathml .katex .katex-html {
  display: inline-block;
}

.pdf-export-mathml .katex-display {
  display: block;
  text-align: center;
  margin: 1em 0;
}

/* Upload/Toggle button styles (use CSS variables instead of Tailwind @apply) */
.btn-upload {
  background: linear-gradient(180deg,var(--primary), #b2f1cfff);
  border: 1px solid var(--border);
  color: var(--secondary-foreground);
  padding: 0.45rem 0.9rem;
  border-radius: 0.375rem;
}

.btn-upload:hover {
  background: linear-gradient(180deg,var(--primary), #439467ff);
  transform: scale(1.02);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.btn-upload:active {
  transform: scale(0.98);
  background: linear-gradient(180deg, #3fbf78, var(--primary));
}
.btn-toggle {
  background: var(--card);
  border: 1px solid var(--border);
  color: var(--foreground);
  padding: 0.45rem 0.9rem;
  border-radius: 0.375rem;
}

/* Ensure preview background uses card color */
.markdown-preview-pdf { background: var(--card); box-shadow: 0 6px 18px rgba(9,20,15,0.04); }

/* Editor card background (editor wrapper uses Card component; ensure inner textarea stands out) */
.card-editor { background: linear-gradient(180deg,var(--card),var(--secondary)); }

/* Landing page / Hero */
.hero {
  background: linear-gradient(180deg, rgba(84,193,138,0.12) 0%, rgba(84,193,138,0.06) 50%, transparent 100%);
  padding: 4rem 0;
}
.hero-inner {
  max-width: 1100px;
  margin: 0 auto;
  display: flex;
  gap: 2rem;
  align-items: center;
  padding: 0 1rem;
}
@media (max-width: 768px) {
  .hero-inner { flex-direction: column; gap: 1rem; padding: 1rem }
  .hero-visual { order: -1 }
  .hero-card { width: 100%; }
  .hero-title { font-size: 1.5rem }
  .cta-row { flex-wrap: wrap }
}
.hero-title {
  font-size: 2.25rem;
  line-height: 1.05;
  font-weight: 700;
  color: var(--foreground);
  margin-bottom: 0.5rem;
}
.hero-subtitle {
  color: var(--muted-foreground);
  font-size: 1.05rem;
  margin-bottom: 1.25rem;
}
.cta-row { display:flex; gap:0.75rem; align-items:center }
.cta-button {
  background: linear-gradient(180deg,var(--primary), #17b65eff);
  transition: all 0.2s ease;
  transform-origin: center;
  color: var(--primary-foreground);
  padding: 0.6rem 1rem;
  border-radius: 12px;
  font-weight: 600;
  box-shadow: 0 6px 20px rgba(84,193,138,0.18);
}

.cta-button:hover {
  background: linear-gradient(180deg,var(--primary), #57ee9bff);
  transform: scale(1.02);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.cta-button:active {
  transform: scale(0.98);
  background: linear-gradient(180deg, #77c99cff, var(--primary));
}
.cta-ghost {
  background: transparent;
  border: 1px solid rgba(11,18,32,0.08);
  color: var(--foreground);
  padding: 0.55rem 0.95rem;
  border-radius: 12px;
}
.hero-visual {
  flex:1; display:flex; align-items:center; justify-content:center;
}
.hero-card {
  background: linear-gradient(180deg, white, var(--secondary));
  border-radius: 18px;
  padding: 1rem;
  width: 320px;
  box-shadow: 0 10px 30px rgba(9,20,15,0.06);
}

/* Distinct section spacing */
.section { padding: 3rem 0 }
.section .section-inner { max-width:1100px; margin:0 auto; padding:0 1rem }

/* Accent headings */
.accent-heading { color: var(--primary); font-weight:700 }

/* 表格样式 */
.table-bordered {
  border-collapse: collapse;
  width: 100%;
  margin: 1em 0;
}

.table-bordered th,
.table-bordered td {
  border: 1px solid #ddd;
  padding: 0.5em;
  text-align: left;
}

.table-bordered th {
  background-color: #f5f5f5;
  font-weight: bold;
}

/* 代码块样式 */
.hljs {
  display: block;
  overflow-x: auto;
  padding: 1em;
  background: #f5f5f5;
  color: #222;
  border-radius: 0.5em;
}

.inline-code {
  font-family: Consolas, monospace;
  background-color: #f5f5f5;
  padding: 0.2em 0.4em;
  border-radius: 0.25em;
  font-size: 0.9em;
}

/* Mermaid 图表容器 */
.mermaid-container {
  margin: 1em 0;
  text-align: center;
}

.mermaid-diagram {
  display: inline-block;
  position: relative;
}

.mermaid-loading {
  padding: 1em;
  text-align: center;
  color: #666;
  font-style: italic;
}

/* 响应式设计 */
@media (max-width: 768px) {
  .markdown-preview-pdf {
    padding: 1rem;
  }
  
  .prose {
    max-width: 100%;
  }
  
  .table-bordered {
    font-size: 0.9em;
  }
  
  .table-bordered th,
  .table-bordered td {
    padding: 0.4em;
  }
}

/* 打印样式 */
@page {
  margin: 0.5in;
}

@media print {
  body {
    font-size: 12pt;
    line-height: 1.4;
  }
  
  .markdown-preview-pdf {
    padding: 0;
    margin: 0;
    background: white;
    color: black;
  }
  
  /* 避免在元素内部断页 */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    page-break-inside: avoid;
  }
  
  pre, code {
    page-break-inside: avoid;
  }
  
  /* 表格相关 */
  table, tr, td, th {
    page-break-inside: avoid;
  }
  
  /* 图表相关 */
  .mermaid-diagram {
    page-break-inside: avoid;
  }
  
  /* 公式相关 */
  .katex, .katex-display {
    page-break-inside: avoid;
  }
}