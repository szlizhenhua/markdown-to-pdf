@import "tailwindcss";

@layer base {
  :root {
    --background: #ffffff;
    --foreground: #333333;
    --card: #ffffff;
    --card-foreground: #333333;
    --popover: #ffffff;
    --popover-foreground: #333333;
    --primary: #3b82f6;
    --primary-foreground: #ffffff;
    --secondary: #f3f4f6;
    --secondary-foreground: #333333;
    --muted: #f3f4f6;
    --muted-foreground: #6b7280;
    --accent: #f3f4f6;
    --accent-foreground: #333333;
    --destructive: #ef4444;
    --destructive-foreground: #ffffff;
    --border: #e5e7eb;
    --input: #e5e7eb;
    --ring: #3b82f6;
    --radius: 0.5rem;
  }

  .dark {
    --background: #0c0a09;
    --foreground: #fafaf9;
    --card: #1c1917;
    --card-foreground: #fafaf9;
    --popover: #1c1917;
    --popover-foreground: #fafaf9;
    --primary: #3b82f6;
    --primary-foreground: #0c0a09;
    --secondary: #292524;
    --secondary-foreground: #fafaf9;
    --muted: #292524;
    --muted-foreground: #a8a29e;
    --accent: #292524;
    --accent-foreground: #fafaf9;
    --destructive: #ef4444;
    --destructive-foreground: #0c0a09;
    --border: #44403c;
    --input: #44403c;
    --ring: #3b82f6;
  }
}

@layer base {
  * {
    border-color: var(--border); /* 替代 @apply border-border */
  }
  body {
    background-color: var(--background);
    color: var(--foreground);
  }
}

/* KaTeX 字体配置 */
@font-face {
  font-family: 'KaTeX_AMS';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_AMS-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_AMS-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_AMS-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Bold.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Bold.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Bold.ttf') format('truetype');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Caligraphic-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Bold.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Bold.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Bold.ttf') format('truetype');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Fraktur-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Main';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Bold.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Bold.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Bold.ttf') format('truetype');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Main';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-BoldItalic.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-BoldItalic.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-BoldItalic.ttf') format('truetype');
  font-weight: bold;
  font-style: italic;
}

@font-face {
  font-family: 'KaTeX_Main';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Italic.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Italic.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Italic.ttf') format('truetype');
  font-weight: normal;
  font-style: italic;
}

@font-face {
  font-family: 'KaTeX_Main';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Main-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Math';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-BoldItalic.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-BoldItalic.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-BoldItalic.ttf') format('truetype');
  font-weight: bold;
  font-style: italic;
}

@font-face {
  font-family: 'KaTeX_Math';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-Italic.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-Italic.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Math-Italic.ttf') format('truetype');
  font-weight: normal;
  font-style: italic;
}

@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Bold.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Bold.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Bold.ttf') format('truetype');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Italic.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Italic.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Italic.ttf') format('truetype');
  font-weight: normal;
  font-style: italic;
}

@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_SansSerif-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Script';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Script-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Script-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Script-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Size1';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size1-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size1-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size1-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Size2';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size2-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size2-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size2-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Size3';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size3-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size3-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size3-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Size4';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size4-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size4-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Size4-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'KaTeX_Typewriter';
  src: url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Typewriter-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Typewriter-Regular.woff') format('woff'),
       url('https://cdn.jsdelivr.net/npm/katex@0.16.23/dist/fonts/KaTeX_Typewriter-Regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@layer utilities {
  .no-print {
    @apply block;
  }

  @media print {
    .no-print {
      @apply hidden;
    }
    
    body {
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
      background: white !important;
      color: black !important;
    }
    
    /* 确保所有内容都能正确打印 */
    * {
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
  }
}

/* 学术风格样式 */
.prose-academic {
  font-family: Georgia, serif;
  line-height: 1.8;
}

.prose-academic h1,
.prose-academic h2,
.prose-academic h3,
.prose-academic h4,
.prose-academic h5,
.prose-academic h6 {
  font-family: Georgia, serif;
  color: #000;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
}

.prose-academic p {
  text-align: justify;
  margin-bottom: 1em;
}

.prose-academic code {
  font-family: Consolas, monospace;
  background-color: #f5f5f5;
  padding: 0.2em 0.4em;
  border-radius: 0.25em;
  font-size: 0.9em;
}

.prose-academic pre {
  background-color: #f5f5f5;
  border-radius: 0.5em;
  padding: 1em;
  overflow-x: auto;
}

.prose-academic blockquote {
  border-left: 4px solid #ccc;
  padding-left: 1em;
  margin-left: 0;
  font-style: italic;
}

/* 现代风格样式 */
.prose-modern {
  font-family: system-ui, sans-serif;
  font-size: 16px;
}

.prose-modern h1,
.prose-modern h2,
.prose-modern h3,
.prose-modern h4,
.prose-modern h5,
.prose-modern h6 {
  font-family: system-ui, sans-serif;
  color: #111827;
  font-weight: 700;
}

.prose-modern a {
  color: #3b82f6;
  text-decoration: none;
}

.prose-modern a:hover {
  text-decoration: underline;
}

/* 最小风格样式 */
.prose-minimal {
  font-family: system-ui, sans-serif;
  color: #333;
}

.prose-minimal h1,
.prose-minimal h2,
.prose-minimal h3,
.prose-minimal h4,
.prose-minimal h5,
.prose-minimal h6 {
  font-weight: 600;
  color: #222;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
}

/* 默认风格样式 */
.prose-default {
  font-family: system-ui, sans-serif;
}

.prose-default h1,
.prose-default h2,
.prose-default h3,
.prose-default h4,
.prose-default h5,
.prose-default h6 {
  color: #111827;
  font-weight: 600;
}

/* PDF导出专用样式 */
.pdf-export-plain {
  background: white !important;
  color: #222 !important;
}

.pdf-export-plain * {
  color: #222 !important;
  background: transparent !important;
  border-color: #ddd !important;
  box-shadow: none !important;
}

.pdf-export-mathml .katex .katex-mathml {
  display: none;
}

.pdf-export-mathml .katex-display .katex-mathml {
  display: none;
}

.pdf-export-mathml .katex .katex-html {
  display: inline-block;
}

.pdf-export-mathml .katex-display {
  display: block;
  text-align: center;
  margin: 1em 0;
}

/* 表格样式 */
.table-bordered {
  border-collapse: collapse;
  width: 100%;
  margin: 1em 0;
}

.table-bordered th,
.table-bordered td {
  border: 1px solid #ddd;
  padding: 0.5em;
  text-align: left;
}

.table-bordered th {
  background-color: #f5f5f5;
  font-weight: bold;
}

/* 代码块样式 */
.hljs {
  display: block;
  overflow-x: auto;
  padding: 1em;
  background: #f5f5f5;
  color: #222;
  border-radius: 0.5em;
}

.inline-code {
  font-family: Consolas, monospace;
  background-color: #f5f5f5;
  padding: 0.2em 0.4em;
  border-radius: 0.25em;
  font-size: 0.9em;
}

/* Mermaid 图表容器 */
.mermaid-container {
  margin: 1em 0;
  text-align: center;
}

.mermaid-diagram {
  display: inline-block;
  position: relative;
}

.mermaid-loading {
  padding: 1em;
  text-align: center;
  color: #666;
  font-style: italic;
}

/* 响应式设计 */
@media (max-width: 768px) {
  .markdown-preview-pdf {
    padding: 1rem;
  }
  
  .prose {
    max-width: 100%;
  }
  
  .table-bordered {
    font-size: 0.9em;
  }
  
  .table-bordered th,
  .table-bordered td {
    padding: 0.4em;
  }
}

/* 打印样式 */
@page {
  margin: 0.5in;
}

@media print {
  body {
    font-size: 12pt;
    line-height: 1.4;
  }
  
  .markdown-preview-pdf {
    padding: 0;
    margin: 0;
    background: white;
    color: black;
  }
  
  /* 避免在元素内部断页 */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    page-break-inside: avoid;
  }
  
  pre, code {
    page-break-inside: avoid;
  }
  
  /* 表格相关 */
  table, tr, td, th {
    page-break-inside: avoid;
  }
  
  /* 图表相关 */
  .mermaid-diagram {
    page-break-inside: avoid;
  }
  
  /* 公式相关 */
  .katex, .katex-display {
    page-break-inside: avoid;
  }
}